<!--pages/waybillList/waybillList.wxml-->
<view>
	<view class="top-bar-view">
		<view class="search-view">
			<view class="search-box">
				<view class="traggle-pick">
					<picker mode="selector" bindchange="chooseField" range-key="label" value="{{choosedFieldIndex}}" range="{{fieldList}}">
					    <view class="filed-picker">{{fieldList[choosedFieldIndex].label}}</view>
					</picker>
					<view class="traggle-down"><image src="/images/traggle_down.png" /></view>
				</view>
				<view class="search-input-view">
					<input confirm-type="search" class="public-input" type="text" name="searchWord" placeholder="请输入" bindtap="searinputChange"/>
				</view>
			</view>
		</view>
		<view class="top-bar">
			<view class="float-left top-bar-item" wx:for="{{topBarList}}" wx:key="param">
				<text data-param="{{item.param}}" catchtap="chooseBar" class="{{item.isChoosed ? 'choosed-bar' : ''}}">{{item.label}}</text>
			</view>
		</view>
	</view>
	<view class="waybill-list">
		<block >
			<view class="waybill-item" wx:for="{{waybillListData}}" wx:key="id" >
				<view class="waybill-item-title">
					<text class="float-left">运单号：{{item.waybill && item.waybill.waybill_number || '无'}}</text>
					<text class="float-right">川A234</text>
				</view>
				<view class="waybill-item-content">
					<view><text>运单号：{{item.waybill && item.waybill.waybill_number || '无'}}</text></view>
					<view><text>车号：xxx</text></view>
					<view wx:if="{{currentChoosedBar === 'all_truck_loaded' || currentChoosedBar === 'all_change'}}">
						<text>计划液厂：{{item.delivery_order && item.delivery_order.fluid_address || '无'}}</text>
					</view>

					<view wx:if="{{currentChoosedBar === 'all_truck_loaded' || currentChoosedBar === 'all_change'}}">
						<text>计划装车时间：{{item.delivery_order && item.delivery_order.plan_time || '无'}}</text>
					</view>

					<view wx:if="{{currentChoosedBar === 'all_truck_loaded' || currentChoosedBar === 'all_change'}}">
						<text>实际到厂时间：{{item.active_time || '无'}}</text>
					</view>
					
					<view wx:if="{{currentChoosedBar === 'all_truck_loaded' || currentChoosedBar === 'all_change' || 'all_match'}}">
						<text>实际装车吨位：{{item.active_tonnage || '无'}}吨</text>
					</view>
					
					<view wx:if="{{currentChoosedBar === 'all_match'}}">
						<text>装车液厂：{{item.delivery_order && item.delivery_order.fluid_address || '无'}}</text>
					</view>

					
					<view wx:if="{{currentChoosedBar === 'all_match' || currentChoosedBar === 'all_unload'}}">
						<text>卸货站名称：{{item.unload_trips && item.unload_trips.destination || '无'}}</text>
					</view>

					<view wx:if="{{currentChoosedBar === 'all_unload'}}">
						<text>装车液厂：{{item.delivery_order && item.delivery_order.fluid_address || '无'}}</text>
					</view>

					<view wx:if="{{currentChoosedBar === 'all_unload'}}">
						<text>计划到站时间：{{item.plan_time || '无'}}</text>
					</view>

					<view wx:if="{{currentChoosedBar === 'all_unload'}}">
						<text>计划卸车时间：{{item.plan_tonnage || '无'}}</text>
					</view>

					<view wx:if="{{currentChoosedBar === 'all_unload'}}">
						<text>实际到站时间：{{item.arrival_time || '无'}}</text>
					</view>

					<view wx:if="{{currentChoosedBar === 'all_unload'}}">
						<text>实际卸车吨位：{{item.active_tonnage || '无'}}</text>
					</view>

					<view class="waybill-status">
						<text>{{item.status && item.status.verbose || '无'}}</text>
					</view>

					<view  wx:if="{{item.status.key === 'waiting_match'}}">
						<button data-id="{{item.waybill.id}}" class="go-match-btn" bindtap="goMatch">匹配卸货地</button>
					</view>
				</view>

			</view>
		</block>

	</view>
</view>
